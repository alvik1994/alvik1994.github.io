<!DOCTYPE html>
<html ng-app="app">
<head lang="en" >
    <meta charset="UTF-8">
    <link href="./materialize-v0.96.1/materialize/css/materialize.min.css" rel="stylesheet">
    <link href="css/mycss.css" rel="stylesheet">
    <title>NYU Mad Libs</title>
</head>
<body class="body" ng-cloak>
<!-- Dropdown Structure -->
    <ul id="stories" class="dropdown-content adjusted">
        <li><a href="#/story1" data-target="#test1">Time at the Square</a></li>
        <li><a href="#/story2" data-target="#test2">Imsomnia Cookies</a></li>
        <li><a href="#/story3" data-target="#test3">Gym Day</a></li>
        <li><a href="#/story4" data-target="#test4">Story 4</a></li>
    </ul>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper nyu-purple">
                <div class="container">
                    <a href="#" class="brand-logo left" style="position: static !important;">NYU Mad Libs</a>
                    <ul class="left hide-on-small-and-down" style="margin-left: 8%">
                        <li><a class="dropdown-button" href="#" data-activates="stories">Stories<i class="mdi-navigation-arrow-drop-down right"></i></a></li>
                    </ul>
                    <ul class="left hide-on-med-and-up" id="collapsible">
                        <li><a class="dropdown-button" href="#" data-activates="stories"><i class="mdi-navigation-arrow-drop-down right"></i></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <div class="row" style="margin-top: 30px;">
        <div class="container">
            <div class="col s12">
                <ul class="tabs">
                    <li class="tab col s3"><a href="#test1" onclick="window.location ='#/story1';">Time at the Square</a></li>
                    <li class="tab col s3"><a href="#test2" onclick="window.location = '#/story2';">Imsomnia Cookies</a></li>
                    <li class="tab col s3"><a href="#test3" onclick="window.location = '#/story3';">Gym Day</a></li>
                    <li class="tab col s3"><a href="#test4" onclick="window.location = '#/story4';">Story 4</a></li>
                </ul>
            </div>
            <div id="test1" class="col s12">
            </div>
            <div id="test2" class="col s12">
            </div>
            <div id="test3" class="col s12">
            </div>
            <div id="test4" class="col s12">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="container">
            <div class="col s12">
                <div class="container">
                    <div ng-view></div>
                </div>
            </div>
        </div>
    </div>

    <script src="./scripts/jquery-1.11.2.min.js"></script>
    <script src="./materialize-v0.96.1/materialize/js/materialize.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var jq = jQuery.noConflict();
    </script>
    <script src="./scripts/angular.js"></script>
    <script src="./scripts/angular-route.js"></script>
    <script>
        jq(document).ready(function(){
            console.log(jq('#stories').width()+"px");
            jq('#collapsible').css("margin-right","-"+jq('#stories').width());
            jq('.dropdown-button').on('click', function(){
                jq('#stories').css("width","auto");
            });
            var $currentTab = jq("a[href='"+location.hash+"']").data('target');
            if ($currentTab){
                $currentTab=$currentTab.substring(1,$currentTab.length);
                jq('ul.tabs').tabs('select_tab', $currentTab);
            }
            jq('ul.tabs').tabs();
            jq('.brand-logo').on('click', function(){
                jq('ul.tabs').tabs('select_tab', 'test1');
            });
            jq('#stories>li>a').on('click', function(){
                var $target = jq(this).data("target");
                $target = $target.substring(1, $target.length);
                jq('ul.tabs').tabs('select_tab', $target);
            });
        });
    </script>

    <script>
        angular.module("app", ['ngRoute'])
            .controller('StoryCtrl',['$scope',function($scope){
                $scope.activetext=false;
                $scope.makeActiveText = function (){
                    $scope.activetext=true;
                }
            }])
            .config(function($routeProvider){
                $routeProvider
                    .when('/story1',{
                        templateUrl: './story1.html',
                        controller: 'StoryCtrl'
                    })
                    .when('/story2',{
                        templateUrl: './story2.html',
                        controller: 'StoryCtrl'
                    })
                    .when('/story3',{
                        templateUrl: './story3.html',
                        controller: 'StoryCtrl'
                    })
                    .when('/story4',{
                        templateUrl: './story3.html',
                        controller: 'StoryCtrl'
                    });
            });
    </script>
</body>
</html>